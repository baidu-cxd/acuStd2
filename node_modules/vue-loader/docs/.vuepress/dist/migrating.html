<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue Loader | Migrating from v14</title>
    <meta name="description" content="Webpack loader for single-file Vue components">
    
    
    <link rel="preload" href="/assets/css/16.styles.1aec7817.css" as="style"><link rel="preload" href="/assets/js/app.9b00e8fa.js" as="script"><link rel="preload" href="/assets/js/2.78690980.js" as="script"><link rel="prefetch" href="/assets/js/9.00e9ff00.js"><link rel="prefetch" href="/assets/js/1.27ce32ca.js"><link rel="prefetch" href="/assets/js/3.e43d8e99.js"><link rel="prefetch" href="/assets/js/4.6a9b7807.js"><link rel="prefetch" href="/assets/js/5.feccc9b3.js"><link rel="prefetch" href="/assets/js/6.7021107d.js"><link rel="prefetch" href="/assets/js/7.aac5bdd5.js"><link rel="prefetch" href="/assets/js/8.94455253.js"><link rel="prefetch" href="/assets/js/0.d3fc8ee8.js"><link rel="prefetch" href="/assets/js/10.55c9646e.js"><link rel="prefetch" href="/assets/js/11.e7dea46f.js"><link rel="prefetch" href="/assets/js/12.b50170df.js"><link rel="prefetch" href="/assets/js/13.2781ed72.js"><link rel="prefetch" href="/assets/js/14.9d84b577.js"><link rel="prefetch" href="/assets/js/15.44d74071.js">
    <link rel="stylesheet" href="/assets/css/16.styles.1aec7817.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Vue Loader
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/spec.html" class="nav-link">SFC Spec</a></div><div class="nav-item"><a href="/options.html" class="nav-link">Options Reference</a></div><div class="nav-item"><a href="/migrating.html" class="nav-link router-link-exact-active router-link-active">Migrating from v14</a></div><a href="https://github.com/vuejs/vue-loader" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/spec.html" class="nav-link">SFC Spec</a></div><div class="nav-item"><a href="/options.html" class="nav-link">Options Reference</a></div><div class="nav-item"><a href="/migrating.html" class="nav-link router-link-exact-active router-link-active">Migrating from v14</a></div><a href="https://github.com/vuejs/vue-loader" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Migrating from v14</span><!----></p><ul class="sidebar-group-items"><li><a href="/migrating.html#notable-breaking-changes" class="sidebar-link">Notable Breaking Changes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/migrating.html#loader-inference" class="sidebar-link">Loader Inference</a></li><li class="sidebar-sub-header"><a href="/migrating.html#template-preprocessing" class="sidebar-link">Template Preprocessing</a></li><li class="sidebar-sub-header"><a href="/migrating.html#style-injection" class="sidebar-link">Style Injection</a></li><li class="sidebar-sub-header"><a href="/migrating.html#postcss" class="sidebar-link">PostCSS</a></li><li class="sidebar-sub-header"><a href="/migrating.html#css-modules" class="sidebar-link">CSS Modules</a></li></ul></li><li><a href="/migrating.html#css-extraction" class="sidebar-link">CSS Extraction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/migrating.html#ssr-externals" class="sidebar-link">SSR externals</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/migrating.html#options-deprecation" class="sidebar-link">Options Deprecation</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="migrating-from-v14"><a href="#migrating-from-v14" aria-hidden="true" class="header-anchor">#</a> Migrating from v14</h1><h2 id="notable-breaking-changes"><a href="#notable-breaking-changes" aria-hidden="true" class="header-anchor">#</a> Notable Breaking Changes</h2><h3 id="loader-inference"><a href="#loader-inference" aria-hidden="true" class="header-anchor">#</a> Loader Inference</h3><p><code>vue-loader</code> 15 now infers loaders to use for language blocks a bit differently.</p><p>Take <code>&lt;style lang=&quot;less&quot;&gt;</code> as an example: in v14 and below, it will attempt to load the block with <code>less-loader</code>, and implicitly chains <code>css-loader</code> and <code>vue-style-loader</code> after it, all using inline loader strings.</p><p>In v15, <code>&lt;style lang=&quot;less&quot;&gt;</code> will behave as if it's an actual <code>*.less</code> file being loaded. So, in order to process it, you need to provide an explicit rule in your main webpack config:</p><pre class="language-js"><code><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...other rules</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>The benefit is that this same rule also applies to plain <code>*.less</code> imports from JavaScript, and you can configure options for these loaders anyway you want. In v14 and below, if you want to provide custom options to an inferred loader, you'd have to duplicate it under <code>vue-loader</code>'s own <code>loaders</code> option. In v15 it is no longer necessary.</p><p>v15 also allows using non-serializable options for loaders, which was not possible in previous versions.</p><h3 id="template-preprocessing"><a href="#template-preprocessing" aria-hidden="true" class="header-anchor">#</a> Template Preprocessing</h3><p>v14 and below uses <a href="https://github.com/tj/consolidate.js/" target="_blank" rel="noopener noreferrer">consolidate</a> to compile <code>&lt;template lang=&quot;xxx&quot;&gt;</code>. v15 now applies preprocessing for them using webpack loaders instead.</p><p>Note that some template loaders such as <code>pug-loader</code> exports a compiled templating function instead of plain HTML. In order to pass the correct content to Vue's template compiler, you must use a loader that outputs plain HTML instead. For example, to support <code>&lt;template lang=&quot;pug&quot;&gt;</code>, you can use <a href="https://github.com/yyx990803/pug-plain-loader" target="_blank" rel="noopener noreferrer">pug-plain-loader</a>:</p><pre class="language-js"><code><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.pug$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'pug-plain-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>If you also intend to use it to import <code>.pug</code> files as HTML strings in JavaScript, you will need to chain <code>raw-loader</code> after the preprocessing loader. Note however adding <code>raw-loader</code> would break the usage in Vue components, so you need to have two rules, one of them targeting Vue files using a <code>resourceQuery</code>, the other one (fallback) targeting JavaScript imports:</p><pre class="language-js"><code><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.pug$/</span><span class="token punctuation">,</span>
        oneOf<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// this applies to &lt;template lang=&quot;pug&quot;&gt; in Vue components</span>
          <span class="token punctuation">{</span>
            resourceQuery<span class="token punctuation">:</span> <span class="token regex">/^\?vue/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'pug-plain-loader'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// this applies to pug imports inside JavaScript</span>
          <span class="token punctuation">{</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'raw-loader'</span><span class="token punctuation">,</span> <span class="token string">'pug-plain-loader'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="style-injection"><a href="#style-injection" aria-hidden="true" class="header-anchor">#</a> Style Injection</h3><p>Client-side style injection now injects all styles upfront to ensure consistent behavior between development and extracted mode.</p><p>Note the injection order is still not guaranteed, so you should avoid writing CSS that relies on insertion order.</p><h3 id="postcss"><a href="#postcss" aria-hidden="true" class="header-anchor">#</a> PostCSS</h3><p><code>vue-loader</code> no longer auto applies PostCSS transforms. To use PostCSS, configure <code>postcss-loader</code> the same way you would for normal CSS files.</p><h3 id="css-modules"><a href="#css-modules" aria-hidden="true" class="header-anchor">#</a> CSS Modules</h3><p>CSS Modules now need to be explicitly configured via <code>css-loader</code> options. The <code>module</code> attribute on <code>&lt;style&gt;</code> tags is still needed for locals injection into the component.</p><p>The good news is that you can now configure <code>localIdentName</code> in one place:</p><pre class="language-js"><code><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'vue-style-loader'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              localIdentName<span class="token punctuation">:</span> <span class="token string">'[local]_[hash:base64:8]'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>If you only want to use CSS Modules in some of your Vue components, you can use a <code>oneOf</code> rule and check for the <code>module</code> string in resourceQuery:</p><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  oneOf<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// this matches &lt;style module&gt;</span>
    <span class="token punctuation">{</span>
      resourceQuery<span class="token punctuation">:</span> <span class="token regex">/module/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            localIdentName<span class="token punctuation">:</span> <span class="token string">'[local]_[hash:base64:5]'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// this matches plain &lt;style&gt; or &lt;style scoped&gt;</span>
    <span class="token punctuation">{</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
        <span class="token string">'css-loader'</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="css-extraction"><a href="#css-extraction" aria-hidden="true" class="header-anchor">#</a> CSS Extraction</h2><p>Works the same way as you'd configure it for normal CSS. Example usage with <a href="https://github.com/webpack-contrib/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin</a>:</p><pre class="language-js"><code><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.vue$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'vue-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        <span class="token comment">// or ExtractTextWebpackPlugin.extract(...)</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'output.css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="ssr-externals"><a href="#ssr-externals" aria-hidden="true" class="header-anchor">#</a> SSR externals</h2><p>In SSR, we typically use <code>webpack-node-externals</code> to exclude npm dependencies from the server build. If you need to import CSS from an npm dependency, the previous solution was using a whitelist like this:</p><pre class="language-js"><code><span class="token comment">// webpack config</span>
externals<span class="token punctuation">:</span> <span class="token function">nodeExternals</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  whitelist<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>With v15, imports for <code>&lt;style src=&quot;dep/foo.css&quot;&gt;</code> now has resourceQuery strings appended at the end of the request, so you need to update the above to:</p><pre class="language-js"><code>externals<span class="token punctuation">:</span> <span class="token function">nodeExternals</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  whitelist<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token regex">/\.css$/</span><span class="token punctuation">,</span> <span class="token operator">/</span>\<span class="token operator">?</span>vue<span class="token operator">&amp;</span>type<span class="token operator">=</span>style<span class="token operator">/</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="options-deprecation"><a href="#options-deprecation" aria-hidden="true" class="header-anchor">#</a> Options Deprecation</h2><p>The following options have been deprecated and should be configured using normal webpack module rules:</p><ul><li><code>loader</code></li><li><code>preLoaders</code></li><li><code>postLoaders</code></li><li><code>postcss</code></li><li><code>cssSourceMap</code></li><li><code>buble</code></li><li><code>extractCSS</code></li><li><code>template</code></li></ul><p>The following options have been deprecated and should be configured using the new <code>compilerOptions</code> option:</p><ul><li><code>preserveWhitespace</code> (use <code>compilerOptions.preserveWhitespace</code>)</li><li><code>compilerModules</code> (use <code>compilerOptions.modules</code>)</li><li><code>compilerDirectives</code> (use <code>compilerOptions.directives</code>)</li></ul><p>The following option has been renamed:</p><ul><li><code>transformToRequire</code> (now renamed to <code>transformAssetUrls</code>)</li></ul><p>The following option has been changed to resourceQuery:</p><ul><li><code>shadowMode</code> (now use inline resource queries, e.g. <code>foo.vue?shadow</code>)</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For a complete list of new options, see <a href="/options.html">Options Reference</a>.</p></div></div><!----><!----><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/assets/js/2.78690980.js" defer></script><script src="/assets/js/app.9b00e8fa.js" defer></script>
  </body>
</html>
